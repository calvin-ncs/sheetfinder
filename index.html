<!DOCTYPE html>
<html>

<head>
    <title>Lists</title>
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="tablequerywrapper.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['table'] });
        google.charts.setOnLoadCallback(init);

        var selectClause = 'select B,C,D,E';
        var whereClause = '';
        var dataSourceUrl = 'https://docs.google.com/spreadsheets/d/1TD08_F7PP4lsRvL5o8dJm0FZgm_7cGqfXmMqhcrAFvQ/gviz/tq?tq=select%20*';
        var query, options, container;

        function init() {
            query = new google.visualization.Query(dataSourceUrl);
            container = document.getElementById("table");
            options = { 'pageSize': 20 };
            sendAndDraw();
        }

        function sendAndDraw() {
            query.abort();
            var tableQueryWrapper = new TableQueryWrapper(query, container, selectClause, whereClause, options);
            tableQueryWrapper.sendAndDraw();
        }

        function setOption(prop, value) {
            options[prop] = value;
            sendAndDraw();
        }

        function isEmpty(input) {
            return (input.length === 0 || !input);
        }
        function handleSearch() {
            var input = document.getElementById('filter').value.trim();
            if (!isEmpty(input)) {
                this.whereClause = "where B contains '" + input + "' or C contains '" + input + "'";
                sendAndDraw();
            }
        }

    </script>

</head>

<body>
    <h1>Song List</h1>
    <form action="" onSubmit="handleSearch(); return false;">
        Number of rows:
        <select onChange=" setOption('pageSize', parseInt(this.value, 10))">
            <option value="5">5</option>
            <option value="10">10</option>
            <option selected=selected value="20">20</option>
            <option value="50">50</option>
            <option value="-1">-1</option>
        </select>
        <input type="text" id="filter" name="filter">
        <button type='button' onclick="handleSearch()">Search</button>
    </form>
    <br />
    <div id="table"></div>


    <br />Add new sheet with Google Form:
    <a href="https://docs.google.com/forms/d/1jVBbZbOWh9RAaJ4Zk0q-Uvsr-6Zfk6UdrFOddxnqfCE" target="_blank">link</a>
</body>

</html>